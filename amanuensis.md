## Problem Statement üí°

The modern electronic health record (EHR) encompasses a treasure trove of information across patient demographics, medical history, clinical data, and other health system interactions (Jensen *et al.*). Although the EHR represents a valuable resource to track clinical care and retrospectively evaluate clinical decision-making, the data deluge of the EHR often obfuscates key pieces of information necessary for the physician to make an accurate diagnosis and devise an effective treatment plan (Noori and Magdamo *et al.*). Physicians may struggle to synthesize the lengthy medical histories of their patients; in the absence of data-driven strategies to extract relevant insights from the EHR, they are forced to rely on intuition alone to generate questions for their patients.

The volume and complexity of the EHR can lead to missed opportunities for physicians to gather critical information pertinent to patient health, leading to medical errors or poor health outcomes. It is imperative to design tools and services to reduce the burden of manual EHR search on physicians and help them elicit the most relevant information from their patients.

## About Amanuensis üìù

Amanuensis is an AI-enabled physician assistant for automated clinical summarization and question generation. By arming physicians with relevant insights collected from the EHR as well as with patient responses to NLP-generated questions, we seek to empower physicians to achieve more accurate diagnoses and effective treatment plans. The Amanuensis pipeline is as follows:

1. **Clinical Summarization:** Through our web application, physicians can access medical records of each of their patients, where they are first presented with a clinical summary: a concise, high-level overview of the patient's medical history, including key information such as diagnoses, medications, and allergies. This clinical summary is automatically generated by Amanuensis using Generative Pre-Trained Transformer 3 (GPT-3), an autoregressive language model with a 2048-token-long context and 175 billion parameters. The clinical summary may be reviewed by the physician to ensure that the summary is accurate and relevant to the patient's health.

2. **Question Generation:** Next, Amanuensis uses GPT-3 to automatically generate a list of questions that the physician can ask their patient to elicit more information and identify relevant information in the EHR that the physician may not have considered. The NLP-generated questions are automatically sent to the patient *prior* to their appointment; then, the physician can review the patient's responses to the questions and use them to inform their clinical decision-making. Importantly, we have validated Amanuensis on a large cohort of high-quality simulated EHRs generated by Synthea<sup>TM</sup>.

By helping doctors to elicit more relevant information from their patients, Amanuensis can help physicians improve patient outcomes and reduce the indiciences of all five types of medical errors: medication errors, patient care complications, procedure/surgery complications, infections, and diagnostic/treatment errors.

## Building Process üèó

To validate Amanuensis, we used the [Synthea<sup>TM</sup>](https://synthetichealth.github.io/synthea/) library to generate synthetic EHRs (Walonoski *et al.*). Synthea<sup>TM</sup> is an open-source software package that simulates the lifespans of synthetic patients, which was developed by international research collaboration involving the MITRE Corporation and the HIKER Group. We customized the Synthea synthetic data generation workflow to produce the following 18 data tables (see also the [Synthea<sup>TM</sup> data dictionary](https://github.com/synthetichealth/synthea/wiki/CSV-File-Data-Dictionary)):

| Table | Description |
|------|-------------|
| `Allergies` | Patient allergy data. |
| `CarePlans` | Patient care plan data, including goals. |
| `Claims` | Patient claim data. |
| `ClaimsTransactions` | Transactions per line item per claim. |
| `Conditions` | Patient conditions or diagnoses. |
| `Devices` | Patient-affixed permanent and semi-permanent devices. |
| `Encounters` | Patient encounter data. |
| `ImagingStudies` | Patient imaging metadata. |
| `Immunizations` | Patient immunization data. |
| `Medications` | Patient medication data. |
| `Observations` | Patient observations including vital signs and lab reports. |
| `Organizations` | Provider organizations including hospitals. |
| `Patients` | Patient demographic data. |
| `PayerTransitions` | Payer transition data (*i.e.*, changes in health insurance). |
| `Payers` | Payer organization data. |
| `Procedures` | Patient procedure data including surgeries. |
| `Providers` | Clinicians that provide patient care. |
| `Supplies` | Supplies used in the provision of care. |

To simulate an EHR system, we pre-processed all synthetic data (see `code/construct_database.Rmd`) to standardize all fields. Next, we constructed a PostgreSQL database and keyed relevant tables together using primary and foreign keys constructed by hand. In total, our database contains **199,717 records** from **20 patients** across **262 different fields**. However, our data generation pipeline is scalable to tens of thousands of patients.

To generate clinical summaries, we used the [GPT-3 API](https://beta.openai.com/docs/api-reference/completions/create) to generate a clinical summary for each patient. Similarly, to generate questions, we used the [GPT-3 API](https://beta.openai.com/docs/api-reference/completions/create) to generate a list of questions for each patient. In both cases, GPT-3 was prompted with a selected subset of the EHR.

Finally, we used the [RedwoodJS](https://redwoodjs.com/) full stack web development framework to build a web application that allows:
1. **Physicians:** Physicians can access the clinical summaries and questions generated by Amanuensis for each of their patients.
2. **Patients:** Patients can access the questions generated by Amanuensis and respond to them via a web form.

During an appointment, physicians will be informed by responses to the clinical questions generated by Amanuensis, which will help them make more informed clinical decisions.

## Future Directions üöÄ

In the future, we hope to integrate Amanuensis into existing EHR systems (*e.g.*, Epic, Cerner, etc.), providing physicians with a seamless, AI-powered assistant to help them make more informed clinical decisions. We also hope to enrich our NLP pipeline with real patient data rather than synthetic EHR records. In concert with gold-standard annotations generated by physicians, we hope to fine-tune our question generation and clinical summarization models on real-world data to improve the sophistication and fidelity of the generated text and enable more robust clinical reasoning capabilities.

# Development Team üßë‚Äçüíª
* [Ayush Noori](mailto:anoori@college.harvard.edu)
* [I√±aki Arango](mailto:inakiarango@college.harvard.edu)
* [Addea Gupta](mailto:addeagupta@college.harvard.edu)
* [Smriti Somasundaram](mailto:smritisomasundaram@college.harvard.edu)

This project was completed during the [TreeHacks 2023](https://www.treehacks.com/) hackathon at Stanford University.

## References üìö

1. Noori, A. et al. Development and Evaluation of a Natural Language Processing Annotation Tool to Facilitate Phenotyping of Cognitive Status in Electronic Health Records: Diagnostic Study. *Journal of Medical Internet Research* **24**, e40384 (2022).

2. Jensen, P. B., Jensen, L. J. & Brunak, S. Mining electronic health records: towards better research applications and clinical care. *Nat Rev Genet* **13**, 395‚Äì405 (2012).

3. Walonoski, J. et al. Synthea: An approach, method, and software mechanism for generating synthetic patients and the synthetic electronic health care record. *Journal of the American Medical Informatics Association* **25**, 230‚Äì238 (2018).
